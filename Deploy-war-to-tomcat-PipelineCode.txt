
	
node{
    stage('SCM checkout'){
        
       git branch: 'master', 
       credentialsId: 'ksrajiba-git', 
       url: 'https://github.com/ksrajiba/myweb.git'
        
    }
    stage('Maven Build'){
        
        sh label: 'maven', script: 'mvn clean package'
    }
    stage('Deploy to tomcat'){
    sshagent(['tomcat-deploy']){
        
      sh 'scp -o StrictHostKeyChecking=no target/*.war ec2-user@13.233.127.110:/opt/tomcat8/webapps/'
      }
    
    }
}

		
		